name: Infra Deployment and Training

on:
  push:
    paths: 
      - '.github/workflows/**' 
      - 'code/**' 
      - 'infra/**'
 
env:
  AZURE_RESOURCE_GROUP: your-resource-group-name
  STORAGE_ACCOUNT: storage-account-name
    
jobs:
  deployment:
    runs-on: ubuntu-latest

    # Steps represent a sequence of tasks that will be executed as part of the job
    steps:
    # Connect the Azure Machine Learning Workspace
    - name: Connect Azure Machine Learning Workspace
      id: aml_workspace
      uses: Azure/aml-workspace@v1
      with:
          azure_credentials: ${{ secrets.AZURE_CREDENTIALS }}
    
    # Submit a training run to the Azure Machine Learning
    - name: Submit training run
      id: aml_run
      uses: Azure/aml-run@v1
      with:
          azure_credentials: ${{ secrets.AZURE_CREDENTIALS }}
